<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Multiple L.R. and Assessing Prediction models Branches of statistical inference  Testing - a hypothesis test evaluates evidence against a particular value for a parameter  Hypothesis test for one proportion Randomization test to compare the values of a parameter across two groups   Estimation - confidence interval estimating a parameter (gives a range of plausible values for a parameter)  Bootstrap confidence interval   Prediction - predict value of a variable for an observation using a statistical model based on other variables  Simple linear regression (one predictor) &ndash; useful when response $y$ is numerical Multiple linear regression (multiple predictors) &ndash; useful when response $y$ is numerical Classification trees - [next lecture] &ndash; useful when response $y$ is categorical    Measuring and assessing prediction accuracy Strategy   Randomly divide the sample data into &ldquo;training&rdquo; and &ldquo;testing&rdquo; datasets"><title>STA130: Lecture_8</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://mel10c.github.io/mel.zhu//icon.png><link href=https://mel10c.github.io/mel.zhu/styles.9a8661985b360a1d97e0e538e164abef.min.css rel=stylesheet><link href=https://mel10c.github.io/mel.zhu/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://mel10c.github.io/mel.zhu/js/darkmode.905e4d2da56a9111aff695a0a4b69900.min.js></script>
<script src=https://mel10c.github.io/mel.zhu/js/util.6f22941e242efae60fd84e7c32e874fa.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script async src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script async src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script async src=https://mel10c.github.io/mel.zhu/js/popover.f03552ccb84d99ca615d1cfb9abde59e.min.js></script>
<script defer src=https://mel10c.github.io/mel.zhu/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://mel10c.github.io/mel.zhu/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://mel10c.github.io/mel.zhu/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://mel10c.github.io/mel.zhu/",fetchData=Promise.all([fetch("https://mel10c.github.io/mel.zhu/indices/linkIndex.5702adc893417d7a266d9ed2e8ebdba1.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://mel10c.github.io/mel.zhu/indices/contentIndex.29e8901604d17bba5377fc5ce2a7f2c6.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://mel10c.github.io/mel.zhu",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://mel10c.github.io/mel.zhu",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'â€™':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/mel10c.github.io\/mel.zhu\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://mel10c.github.io/mel.zhu/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://mel10c.github.io/mel.zhu/>MEL.ZHU</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>STA130: Lecture_8</h1><p class=meta>Last updated
Unknown</p><ul class=tags><li><a href=https://mel10c.github.io/mel.zhu/tags/note/>Note</a></li></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><ol><li><a href=#branches-of-statistical-inference>Branches of statistical inference</a></li></ol></li><li><a href=#measuring-and-assessing-prediction-accuracy>Measuring and assessing prediction accuracy</a><ol><li><a href=#strategy>Strategy</a></li><li><a href=#interpretation-and-purpose-of-the-rmse>Interpretation and purpose of the RMSE</a></li></ol></li><li><a href=#multiple-linear-regression-building-richer-prediction-models>Multiple linear regression: Building richer prediction models</a><ol><li><a href=#parallel-lines>Parallel lines</a></li><li><a href=#non-parallel-lines>Non-parallel lines</a></li></ol></li><li><a href=#comparing-prediction-models-criteria-for-choosing-the-best>Comparing prediction models (criteria for choosing the best)</a><ol><li><a href=#steps-to-choose-between-different-models>Steps to choose between different models</a></li></ol></li></ol></nav></details></aside><a href=#multiple-lr-and-assessing-prediction-models><h1 id=multiple-lr-and-assessing-prediction-models><span class=hanchor arialabel=Anchor># </span>Multiple L.R. and Assessing Prediction models</h1></a><a href=#branches-of-statistical-inference><h3 id=branches-of-statistical-inference><span class=hanchor arialabel=Anchor># </span>Branches of statistical inference</h3></a><ul><li><u>Testing</u> - a <strong>hypothesis test</strong> evaluates evidence against a particular value for a parameter<ul><li>Hypothesis test for one proportion</li><li>Randomization test to compare the values of a parameter across two groups</li></ul></li><li><u>Estimation</u> - <strong>confidence interval</strong> estimating a parameter (gives a range of plausible values for a parameter)<ul><li>Bootstrap confidence interval</li></ul></li><li><u>Prediction</u> - predict value of a variable for an observation using a statistical model based on other variables<ul><li>Simple linear regression (one predictor) &ndash; useful when response $y$ is numerical</li><li>Multiple linear regression (multiple predictors) &ndash; useful when response $y$ is numerical</li><li>Classification trees - [next lecture] &ndash; useful when response $y$ is categorical</li></ul></li></ul><a href=#measuring-and-assessing-prediction-accuracy><h2 id=measuring-and-assessing-prediction-accuracy><span class=hanchor arialabel=Anchor># </span>Measuring and assessing prediction accuracy</h2></a><a href=#strategy><h3 id=strategy><span class=hanchor arialabel=Anchor># </span>Strategy</h3></a><ol><li><p>Randomly divide the sample data into &ldquo;training&rdquo; and &ldquo;testing&rdquo; datasets</p><blockquote><p>Ex: 80% for training and 20% for testing</p></blockquote></li><li><p>Fit the prediction model based on the training data</p></li><li><p>Run the &ldquo;test&rdquo; data through the fitted prediction model & look at how accurate the prediction model was</p></li></ol><ul><li><p>When fit a prediction model, it uses the $(x_i, y_i)$ pair of observations sets to get to the estimations of the regression coefficient $\hat{\beta}$. Therefore it would me more <em>fair</em> to use a different observation set for <strong>fitting (or building</strong> and <strong>testing</strong> a prediction model</p></li><li><p>The Root Mean Squared Error (<strong>RMSE</strong>) measure can help to summarize the &ldquo;accuracy&rdquo; of the prediction. More specifically, it <strong>measures prediction error for predictions from a linear regression model.</strong>
$$
RMSE = \sqrt{\frac{1}{n} \sum_{i=1}^{n} (y_i - \hat{y}_i)^2}
$$
It can be used to compare different sizes of datasets (as long as they are all in the same unit) and to compare different models not he same dataset</p></li><li><p><code>rowid_to_column()</code> - the &ldquo;index&rdquo; for data in a dataset, a built-in <code>tydiverse</code> function</p></li><li><p><code>%in%</code> - a function that filter whether an element in found in a dataset</p></li><li><p><code>predict(&lt;model_name>, newdata = &lt;prediction_data>)</code> - make prediction for new observations</p></li></ul><blockquote><a href=#r-code-to-create-training-and-testing-datasets--make-predictions-using-a-fitted-regression-model><h5 id=r-code-to-create-training-and-testing-datasets--make-predictions-using-a-fitted-regression-model><span class=hanchor arialabel=Anchor># </span>R Code to create training and testing datasets & make predictions using a fitted regression model</h5></a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-R data-lang=R><span class=line><span class=cl><span class=nf>library</span><span class=p>(</span><span class=n>tidyverse</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>heights</span> <span class=o>&lt;-</span> <span class=nf>read.csv</span><span class=p>(</span><span class=s>&#34;heights.csv&#34;</span><span class=p>)</span> <span class=o>%&gt;%</span> <span class=nf>select</span><span class=p>(</span><span class=o>-</span><span class=n>X</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>set.seed</span><span class=p>(</span><span class=m>123</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>n</span> <span class=o>&lt;-</span> <span class=nf>nrow</span><span class=p>(</span><span class=n>heights</span><span class=p>)</span>  <span class=c1># number of observations in heights data (40)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Pick 80% of observations to go into the training dataset (32 out of 40)</span>
</span></span><span class=line><span class=cl><span class=n>training_indices</span> <span class=o>&lt;-</span> <span class=nf>sample</span><span class=p>(</span><span class=m>1</span><span class=o>:</span><span class=n>n</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=nf>round</span><span class=p>(</span><span class=m>0.8</span><span class=o>*</span><span class=n>n</span><span class=p>))</span> 
</span></span><span class=line><span class=cl><span class=c1># Add a column caled &#34;rowid&#34; to our heights tibble</span>
</span></span><span class=line><span class=cl><span class=n>heights</span> <span class=o>&lt;-</span> <span class=n>heights</span> <span class=o>%&gt;%</span> <span class=nf>rowid_to_column</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create training dataset</span>
</span></span><span class=line><span class=cl><span class=n>train</span> <span class=o>&lt;-</span> <span class=n>heights</span> <span class=o>%&gt;%</span> <span class=nf>filter</span><span class=p>(</span><span class=n>rowid</span> <span class=o>%in%</span> <span class=n>training_indices</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># Testing dataset includes all observations NOT in the training data</span>
</span></span><span class=line><span class=cl><span class=n>test</span> <span class=o>&lt;-</span> <span class=n>heights</span> <span class=o>%&gt;%</span> <span class=nf>filter</span><span class=p>(</span><span class=o>!</span><span class=p>(</span><span class=n>rowid</span> <span class=o>%in%</span> <span class=n>training_indicces</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Build model using the training data only</span>
</span></span><span class=line><span class=cl><span class=n>model</span> <span class=o>&lt;-</span> <span class=nf>lm</span><span class=p>(</span><span class=n>height</span> <span class=o>~</span> <span class=n>shoePrint</span><span class=p>,</span> <span class=n>data</span> <span class=o>=</span> <span class=n>train</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Make predictions for test data using the training model</span>
</span></span><span class=line><span class=cl><span class=n>y_hat_test</span> <span class=o>&lt;-</span> <span class=nf>predict</span><span class=p>(</span><span class=n>model</span><span class=p>,</span> <span class=n>newdata</span> <span class=o>=</span> <span class=n>test</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>y_test</span> <span class=o>&lt;-</span> <span class=n>test</span><span class=o>$</span><span class=n>height</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Calculate RMSE for prediction in the test dataset</span>
</span></span><span class=line><span class=cl><span class=nf>sqrt</span><span class=p>(</span> <span class=nf>sum</span><span class=p>(</span> <span class=p>(</span><span class=n>y_test</span> <span class=o>-</span> <span class=n>y_hat_test</span><span class=p>)</span><span class=n>^2</span><span class=p>)</span> <span class=o>/</span> <span class=nf>nrow</span><span class=p>(</span><span class=n>test</span><span class=p>)</span> <span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></blockquote><a href=#interpretation-and-purpose-of-the-rmse><h3 id=interpretation-and-purpose-of-the-rmse><span class=hanchor arialabel=Anchor># </span>Interpretation and purpose of the RMSE</h3></a><ul><li>A small value of RMSE indicates that on average, the predictions for the response are close to the true (observed) values. (<strong>small implies good prediction accuracy</strong>)</li><li>The coefficient of determination $R^2$ only tells the proportion fo variability in $y$, not does not directly indicates the accuracy of the predictions</li></ul><table><thead><tr><th>$R^2$</th><th>$RMSE$</th></tr></thead><tbody><tr><td>$1 - \frac{\sum_{i=1}^n (y_i - \hat{y}<em>i)}{\sum</em>{i=1}^n (y_i - \bar{y})^2}$</td><td>$\sqrt{\frac{1}{n} \sum_{i=1}^{n} (y_i - \hat{y}_i)^2}$</td></tr><tr><td>Range: 0 to 1</td><td>Range: 0 to infinity</td></tr><tr><td><strong>Larger</strong> value indicates larger proportion of<br>variation of the response explained by the model</td><td><strong>Smaller</strong> value indicates better prediction accuracy</td></tr><tr><td>No units</td><td>Same units as $y$ (the response variable)</td></tr></tbody></table><a href=#multiple-linear-regression-building-richer-prediction-models><h2 id=multiple-linear-regression-building-richer-prediction-models><span class=hanchor arialabel=Anchor># </span>Multiple linear regression: Building richer prediction models</h2></a><a href=#parallel-lines><h3 id=parallel-lines><span class=hanchor arialabel=Anchor># </span>Parallel lines</h3></a><ul><li><p>Linear regression models with 2 (or more) predictors, these predictors can be numerical or categorial
$$
y_i = \beta_0 + \beta_1 x_{1i} + \beta_2 x_{2i} + \dots + \epsilon_i
$$
Where $x_{1i}$ is the first predictor, and $x_{2i}$ is the second predictor</p><ul><li>Fitted line for predictor 1 (assume $x_{2i}$ is categorical): $\hat{y}_i = \hat{\beta}_0 +\hat{\beta}<em>2 x</em>{1i} + \hat{\beta}_2 (0) = \hat{\beta}_0 + \hat{\beta}<em>1 x</em>{1i}$</li><li>Fitted line for predictor 2 (assume $x_{2i}$ is categorical): $\hat{y}_i = \hat{\beta}_0 +\hat{\beta}<em>2 x</em>{1i} + \hat{\beta}_2 (1) = (\hat{\beta}_0 + \hat{\beta}_2) + \hat{\beta}<em>1 x</em>{1i}$</li><li>Equation for the regression line: $\hat{y}_i = \hat{\beta}_0 +\hat{\beta}<em>2 x</em>{1i} + \hat{\beta}<em>2 x</em>{2i} $</li></ul></li><li><p>The second variable would produce multiple parallel lines (<strong>common slope</strong> of $\hat{\beta}_1$), different intercepts</p><ul><li>Intercept for predictor 2 is $\hat{\beta}_0 + \hat{\beta}_2$; <strong>difference</strong> between the two predictor is $\hat{\beta}_2$</li></ul></li><li><p>New functions to plot multiple lines in <code>R</code></p><ul><li>The <code>augment(model_name)</code> functions from the <code>broom</code> library creates a data frame with <strong>predicted values</strong> (named the <code>.fitted</code> column), residuals, etc</li></ul></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-R data-lang=R><span class=line><span class=cl><span class=c1># Fitted model for 2 predictors</span>
</span></span><span class=line><span class=cl><span class=n>model2</span> <span class=o>&lt;-</span> <span class=nf>lm</span><span class=p>(</span><span class=o>&lt;</span><span class=n>target_variable</span><span class=o>&gt;</span> <span class=o>~</span> <span class=o>&lt;</span><span class=n>x_i</span><span class=o>&gt;</span> <span class=o>+</span> <span class=o>&lt;</span><span class=n>x_2</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>data</span> <span class=o>=</span> <span class=o>&lt;</span><span class=n>dataset</span><span class=o>&gt;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>summary</span><span class=p>(</span><span class=n>model2</span><span class=p>)</span><span class=o>$</span><span class=n>coefficients</span>
</span></span><span class=line><span class=cl><span class=c1>##					Estimate	Std. Error	t-value		Pr(&gt;|t|)</span>
</span></span><span class=line><span class=cl><span class=c1>## (Intercept)	 	...			...			...			...</span>
</span></span><span class=line><span class=cl><span class=c1>## variable_1	 	...			...			...			...</span>
</span></span><span class=line><span class=cl><span class=c1>## variable_2	 	...			...			...			...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>library</span><span class=p>(</span><span class=n>broom</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>augment</span><span class=p>(</span><span class=n>model2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>## A tibble: (num of rows) x (number of columns)</span>
</span></span><span class=line><span class=cl><span class=c1>##			variable_y 	durtation	cond		.fitted		.se.fit		.resid		.hat		.sigma		.cooksd</span>
</span></span><span class=line><span class=cl><span class=c1>## 			&lt;dbl&gt;		&lt;int&gt;		&lt;fct&gt;		&lt;dbl&gt;		&lt;dbl&gt;		&lt;dbl&gt;		&lt;dbl&gt;		&lt;dbl&gt;		&lt;dbl&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>## 1		...			...			...			...			...			...			...			...			...</span>
</span></span><span class=line><span class=cl><span class=c1>## 2		...			...			...			...			...			...			...			...			...</span>
</span></span><span class=line><span class=cl><span class=c1>## 3		...			...			...			...			...			...			...			...			...</span>
</span></span><span class=line><span class=cl><span class=c1>## ... with (num of rows - 3) more rows, and (number of columns - 9) more </span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Plot the parallel lines model</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=n>dataset</span><span class=o>&gt;</span> <span class=o>%&gt;%</span> <span class=nf>ggplot</span><span class=p>(</span><span class=nf>aes</span><span class=p>(</span><span class=n>x</span><span class=o>=&lt;</span><span class=n>x_1</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>y</span><span class=o>=&lt;</span><span class=n>target_variable</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>color</span><span class=o>=&lt;</span><span class=n>x_2</span><span class=o>&gt;</span><span class=p>))</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>		<span class=nf>geom_point</span><span class=p>(</span><span class=n>alpha</span><span class=o>=</span><span class=m>0.5</span><span class=p>)</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>		<span class=nf>geom_line</span><span class=p>(</span><span class=n>data</span><span class=o>=</span><span class=nf>augment</span><span class=p>(</span><span class=n>model2</span><span class=p>),</span> <span class=nf>aes</span><span class=p>(</span><span class=n>y</span><span class=o>=</span><span class=n>.fitted</span><span class=p>,</span> <span class=n>colour</span><span class=o>=&lt;</span><span class=n>x_2</span><span class=o>&gt;</span><span class=p>))</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>		<span class=nf>labs</span><span class=p>(</span><span class=n>x</span><span class=o>=</span><span class=s>&#34;name of x_1 varaible(unit)&#34;</span><span class=p>,</span> <span class=n>y</span><span class=o>=</span><span class=s>&#34;name of target variable (unit)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># This would output a graph</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><a href=#parallel-regression-line-created-for-the-mariokart-dataset-from-the-openintro-library><h5 id=parallel-regression-line-created-for-the-mariokart-dataset-from-the-openintro-library><span class=hanchor arialabel=Anchor># </span>Parallel regression line created for the <code>mariokart</code> dataset from the <code>openintro</code> library</h5></a><ul><li>Use <code>geom_line()</code> function, with template from above for the regression lines</li></ul><img src=https://tva1.sinaimg.cn/large/008eGmZEly1gonwx19wxmj30wy0kmq79.jpg alt="Screen Shot 2021-03-17 at 23.32.23" style=zoom:30%></blockquote><a href=#non-parallel-lines><h3 id=non-parallel-lines><span class=hanchor arialabel=Anchor># </span>Non-parallel lines</h3></a><ul><li><p><u>Simpson&rsquo;s paradox</u> - adding an extra predictor changes the direction of the association in a L.R model</p></li><li><p>If the new predictor <strong>modifies the relationship</strong> between the first predictor and the target variable, create a new model that represent this:
$$
y_i = \beta_0 + \beta_1 x_{1i} + \beta_2 x_{2i} + \beta_3 x_{1i} x_{2i} + \epsilon_i
$$</p><ul><li><u>Interaction term</u> - new independent variable, which is the <em>product</em> of $x_1$ and $x_2$</li><li>Fitted line for predictor 1 (assume $x_{2i}$ is categorical): [does not change]
$\hat{y}_i = \hat{\beta}_0 +\hat{\beta}<em>2 x</em>{1i} + \hat{\beta}_2 (0) + \hat{\beta}<em>3x</em>{1i} (0) = \hat{\beta}_0 + \hat{\beta}<em>1 x</em>{1i}$</li><li>Fitted line for predictor 2 (assume $x_{2i}$ is categorical): [change of slope]
$\hat{y}_i = \hat{\beta}_0 +\hat{\beta}<em>2 x</em>{1i} + \hat{\beta}_2 (1) + \hat{\beta}<em>3 x</em>{1i}(1) = (\hat{\beta}_0 + \hat{\beta}_2) + (\hat{\beta}_1 + \hat{\beta}<em>3)~ x</em>{1i}$</li></ul></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-R data-lang=R><span class=line><span class=cl><span class=c1># Fit the linear model with an interaction term (use * instead of + between predictors)</span>
</span></span><span class=line><span class=cl><span class=n>model3</span> <span class=o>&lt;-</span> <span class=nf>lm</span><span class=p>(</span><span class=o>&lt;</span><span class=n>target_variable</span><span class=o>&gt;</span> <span class=o>~</span> <span class=o>&lt;</span><span class=n>x_i</span><span class=o>&gt;</span> <span class=o>*</span> <span class=o>&lt;</span><span class=n>x_2</span><span class=o>&gt;</span><span class=p>,</span> <span class=n>data</span> <span class=o>=</span> <span class=o>&lt;</span><span class=n>dataset</span><span class=o>&gt;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>summary</span><span class=p>(</span><span class=n>model3</span><span class=p>)</span><span class=o>$</span><span class=n>coefficients</span>
</span></span><span class=line><span class=cl><span class=c1>## 								Estimate	Std. Error		t-value		Pr(&gt;|t|)</span>
</span></span><span class=line><span class=cl><span class=c1>## (Intercept)			  		...			...			...				...</span>
</span></span><span class=line><span class=cl><span class=c1>## variable_1				   	...		  	...			...				...</span>
</span></span><span class=line><span class=cl><span class=c1>## variable_2				   	...		  	...			...				...</span>
</span></span><span class=line><span class=cl><span class=c1>## variable_1: variable_2 		...		  	...			...				...</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><a href=#non-parallel-regression-line-created-for-the-mariokart-dataset-from-the-openintro-library><h5 id=non-parallel-regression-line-created-for-the-mariokart-dataset-from-the-openintro-library><span class=hanchor arialabel=Anchor># </span>Non-parallel regression line created for the <code>mariokart</code> dataset from the <code>openintro</code> library</h5></a><ul><li>Use <code>geom_smooth()</code> function, same template with <a class="internal-link broken">simple linear regression</a> plots</li></ul><img src=https://tva1.sinaimg.cn/large/008eGmZEly1gonwxnk8v8j30q60gcq5v.jpg alt="Screen Shot 2021-03-17 at 23.47.18" style=zoom:40%></blockquote><a href=#comparing-prediction-models-criteria-for-choosing-the-best><h2 id=comparing-prediction-models-criteria-for-choosing-the-best><span class=hanchor arialabel=Anchor># </span>Comparing prediction models (criteria for choosing the best)</h2></a><ul><li>A model with <strong>good prediction accuracy on average</strong> (small RMSE)</li><li>A model which doesn&rsquo;t exhibit evidence of <strong>overfitting</strong> (RMSE for training and test data are similar<ul><li><u>Overfitting</u> - not &ldquo;fairly trained&rdquo;, predict good for trained data, doesn&rsquo;t predict new data well. RMSE for training dataset is much smaller than the testing dataset</li></ul></li><li>A model which <strong>as simple as possible</strong> (not too many predictors), while still catering the association between the predictors and the response</li></ul><a href=#steps-to-choose-between-different-models><h3 id=steps-to-choose-between-different-models><span class=hanchor arialabel=Anchor># </span>Steps to choose between different models</h3></a><ol><li>Input the data and add new ID column called <code>rowid</code></li><li>Create training dataset</li><li>Testing dataset inlaces all observations NOT in the training data</li><li>Fit the models to training data</li><li>Make predictions for <strong>testing</strong> and <strong>training</strong> data using training model</li><li>Calculate RMSE for <strong>testing</strong> and <strong>training</strong> data</li><li>Comparing the different models<ul><li>Prediction accuracy from the RMSE for test data</li><li>Evidence for overfitting (compare RMSE for training and testing data)</li><li>Simplicity of the model</li><li>Conclusion</li></ul></li></ol><blockquote><a href=#compaering-prediction-models-for-the-mariokart-dataset><h5 id=compaering-prediction-models-for-the-mariokart-dataset><span class=hanchor arialabel=Anchor># </span>Compaering prediction models for the <code>mariokart</code> dataset</h5></a><ul><li><p>Models</p><ul><li>A: $y_i = \beta_0 + \beta_1 \times \text{duration}_i + \epsilon_i$</li><li>B: $y_i = \beta_0 + \beta_1 \times I(\text{game i is used}) + \epsilon_i$</li><li>C: $y_i = \beta_0 + \beta_1 \times \text{duration}_i + \beta_2 \times I(\text{game i is used}) + \epsilon_i$</li><li>D: $y_i = \beta_0 + \beta_1 \times \text{duration}_i + \beta_2 \times I(\text{game i is used}) + \beta_3 \times \left[\text{duration}_i \cdot I(\text{game i is used}) \right] + \epsilon_i$</li></ul></li><li><p>Creating training/testing datasets & firing models</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-R data-lang=R><span class=line><span class=cl><span class=c1># Set up</span>
</span></span><span class=line><span class=cl><span class=nf>set.seed</span><span class=p>(</span><span class=m>1211</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=n>n</span> <span class=o>&lt;-</span> <span class=nf>nrow</span><span class=p>(</span><span class=n>mariokart2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>training_indices</span> <span class=o>&lt;-</span> <span class=nf>sample</span><span class=p>(</span><span class=m>1</span><span class=o>:</span><span class=n>n</span><span class=p>,</span> <span class=n>size</span><span class=o>=</span><span class=nf>round</span><span class=p>(</span><span class=m>0.8</span><span class=o>*</span><span class=n>n</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>mariokart2</span> <span class=o>&lt;-</span> <span class=n>mariokart2</span> <span class=o>%&gt;%</span> <span class=nf>rowid_to_column</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Create training dataset</span>
</span></span><span class=line><span class=cl><span class=n>train</span> <span class=o>&lt;-</span> <span class=n>mariokart2</span> <span class=o>%&gt;%</span> <span class=nf>filter</span><span class=p>(</span><span class=n>rowid</span> <span class=o>%in%</span> <span class=n>training_indices</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>y_train</span> <span class=o>&lt;-</span> <span class=n>train</span><span class=o>$</span><span class=n>total_pr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Testing dataset includes all observations NOT in the training data</span>
</span></span><span class=line><span class=cl><span class=n>test</span> <span class=o>&lt;-</span> <span class=n>mariokart2</span> <span class=o>%&gt;%</span> <span class=nf>filter</span><span class=p>(</span><span class=o>!</span> <span class=p>(</span><span class=n>rowid</span> <span class=o>%in%</span> <span class=n>training_indecies</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>y_test</span> <span class=o>&lt;-</span> <span class=n>test</span><span class=o>$</span><span class=n>total_pr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Fit models to training data</span>
</span></span><span class=line><span class=cl><span class=n>modA_train</span> <span class=o>&lt;-</span> <span class=nf>lm</span><span class=p>(</span><span class=n>total_pr</span> <span class=o>~</span> <span class=n>duration</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>train</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>modB_train</span> <span class=o>&lt;-</span> <span class=nf>lm</span><span class=p>(</span><span class=n>total_pr</span> <span class=o>~</span> <span class=n>cond</span><span class=p>,</span> <span class=n>data</span> <span class=o>=</span> <span class=n>train</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=n>modC_train</span> <span class=o>&lt;-</span> <span class=nf>lm</span><span class=p>(</span><span class=n>total_pr</span> <span class=o>~</span> <span class=n>duration</span> <span class=o>+</span> <span class=n>cond</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>train</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=n>modD_train</span> <span class=o>&lt;-</span> <span class=nf>lm</span><span class=p>(</span><span class=n>total_pr</span> <span class=o>~</span> <span class=n>duration</span> <span class=o>*</span> <span class=n>cond</span><span class=p>,</span> <span class=n>data</span><span class=o>=</span><span class=n>train</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>Making predictions for observations using either training or testing data (separately)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-R data-lang=R><span class=line><span class=cl><span class=c1># Make prediction for training data using training model</span>
</span></span><span class=line><span class=cl><span class=n>yhat_modA_train</span> <span class=o>&lt;-</span> <span class=nf>predict</span><span class=p>(</span><span class=n>modA_train</span><span class=p>,</span> <span class=n>newdata</span> <span class=o>=</span> <span class=n>train</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=n>yhat_modB_train</span> <span class=o>&lt;-</span> <span class=nf>predict</span><span class=p>(</span><span class=n>modB_train</span><span class=p>,</span> <span class=n>newdata</span> <span class=o>=</span> <span class=n>train</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=n>yhat_modC_train</span> <span class=o>&lt;-</span> <span class=nf>predict</span><span class=p>(</span><span class=n>modC_train</span><span class=p>,</span> <span class=n>newdata</span> <span class=o>=</span> <span class=n>train</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=n>yhat_modD_train</span> <span class=o>&lt;-</span> <span class=nf>predict</span><span class=p>(</span><span class=n>modD_train</span><span class=p>,</span> <span class=n>newdata</span> <span class=o>=</span> <span class=n>train</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Make predcitions for testing data using training model</span>
</span></span><span class=line><span class=cl><span class=n>yhat_modA_test</span> <span class=o>&lt;-</span> <span class=nf>predict</span><span class=p>(</span><span class=n>modA_train</span><span class=p>,</span> <span class=n>newdata</span> <span class=o>=</span> <span class=n>test</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>yhat_modB_test</span> <span class=o>&lt;-</span> <span class=nf>predict</span><span class=p>(</span><span class=n>modB_train</span><span class=p>,</span> <span class=n>newdata</span> <span class=o>=</span> <span class=n>test</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=n>yhat_modC_test</span> <span class=o>&lt;-</span> <span class=nf>predict</span><span class=p>(</span><span class=n>modC_train</span><span class=p>,</span> <span class=n>newdata</span> <span class=o>=</span> <span class=n>test</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=n>yhat_modD_test</span> <span class=o>&lt;-</span> <span class=nf>predict</span><span class=p>(</span><span class=n>modD_train</span><span class=p>,</span> <span class=n>newdata</span> <span class=o>=</span> <span class=n>test</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>Calculating RMSE</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-R data-lang=R><span class=line><span class=cl><span class=c1># Calculate RMSE for training data</span>
</span></span><span class=line><span class=cl><span class=n>modA_train_RMSE</span> <span class=o>&lt;-</span> <span class=nf>sqrt</span><span class=p>(</span><span class=nf>sum</span><span class=p>((</span><span class=n>y_train</span> <span class=o>-</span> <span class=n>yhat_modA_train</span><span class=p>)</span><span class=n>^2</span><span class=p>)</span> <span class=o>/</span> <span class=nf>nrow</span><span class=p>(</span><span class=n>train</span><span class=p>))</span> 
</span></span><span class=line><span class=cl><span class=n>modB_train_RMSE</span> <span class=o>&lt;-</span> <span class=nf>sqrt</span><span class=p>(</span><span class=nf>sum</span><span class=p>((</span><span class=n>y_train</span> <span class=o>-</span> <span class=n>yhat_modB_train</span><span class=p>)</span><span class=n>^2</span><span class=p>)</span> <span class=o>/</span> <span class=nf>nrow</span><span class=p>(</span><span class=n>train</span><span class=p>))</span> 
</span></span><span class=line><span class=cl><span class=n>modC_train_RMSE</span> <span class=o>&lt;-</span> <span class=nf>sqrt</span><span class=p>(</span><span class=nf>sum</span><span class=p>((</span><span class=n>y_train</span> <span class=o>-</span> <span class=n>yhat_modC_train</span><span class=p>)</span><span class=n>^2</span><span class=p>)</span> <span class=o>/</span> <span class=nf>nrow</span><span class=p>(</span><span class=n>train</span><span class=p>))</span> 
</span></span><span class=line><span class=cl><span class=n>modD_train_RMSE</span> <span class=o>&lt;-</span> <span class=nf>sqrt</span><span class=p>(</span><span class=nf>sum</span><span class=p>((</span><span class=n>y_train</span> <span class=o>-</span> <span class=n>yhat_modD_train</span><span class=p>)</span><span class=n>^2</span><span class=p>)</span> <span class=o>/</span> <span class=nf>nrow</span><span class=p>(</span><span class=n>train</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Calculate RMSE for testing data</span>
</span></span><span class=line><span class=cl><span class=n>modA_test_RMSE</span> <span class=o>&lt;-</span> <span class=nf>sqrt</span><span class=p>(</span> <span class=nf>sum</span><span class=p>(</span> <span class=p>(</span><span class=n>y_test</span> <span class=o>-</span> <span class=n>yhat_modA_test</span><span class=p>)</span><span class=n>^2</span> <span class=p>)</span> <span class=o>/</span> <span class=nf>nrow</span><span class=p>(</span><span class=n>test</span><span class=p>)</span> <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>modB_test_RMSE</span> <span class=o>&lt;-</span> <span class=nf>sqrt</span><span class=p>(</span> <span class=nf>sum</span><span class=p>(</span> <span class=p>(</span><span class=n>y_test</span> <span class=o>-</span> <span class=n>yhat_modB_test</span><span class=p>)</span><span class=n>^2</span> <span class=p>)</span> <span class=o>/</span> <span class=nf>nrow</span><span class=p>(</span><span class=n>test</span><span class=p>)</span> <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>modC_test_RMSE</span> <span class=o>&lt;-</span> <span class=nf>sqrt</span><span class=p>(</span> <span class=nf>sum</span><span class=p>(</span> <span class=p>(</span><span class=n>y_test</span> <span class=o>-</span> <span class=n>yhat_modC_test</span><span class=p>)</span><span class=n>^2</span> <span class=p>)</span> <span class=o>/</span> <span class=nf>nrow</span><span class=p>(</span><span class=n>test</span><span class=p>)</span> <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>modD_test_RMSE</span> <span class=o>&lt;-</span> <span class=nf>sqrt</span><span class=p>(</span> <span class=nf>sum</span><span class=p>(</span> <span class=p>(</span><span class=n>y_test</span> <span class=o>-</span> <span class=n>yhat_modD_test</span><span class=p>)</span><span class=n>^2</span> <span class=p>)</span> <span class=o>/</span> <span class=nf>nrow</span><span class=p>(</span><span class=n>test</span><span class=p>)</span> <span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>Comparing the four models</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-R data-lang=R><span class=line><span class=cl><span class=n>mytable</span> <span class=o>&lt;-</span> <span class=nf>tibble</span><span class=p>(</span><span class=n>Model</span> <span class=o>=</span> <span class=nf>c</span><span class=p>(</span><span class=s>&#34;A&#34;</span><span class=p>,</span><span class=s>&#34;B&#34;</span><span class=p>,</span><span class=s>&#34;C&#34;</span><span class=p>,</span><span class=s>&#34;D&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                  <span class=n>RMSE_testdata</span> <span class=o>=</span> <span class=nf>c</span><span class=p>(</span><span class=n>modA_test_RMSE</span><span class=p>,</span> <span class=n>modB_test_RMSE</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                                    <span class=n>modC_test_RMSE</span><span class=p>,</span> <span class=n>modD_test_RMSE</span><span class=p>),</span> 
</span></span><span class=line><span class=cl>                  <span class=n>RMSE_traindata</span> <span class=o>=</span> <span class=nf>c</span><span class=p>(</span><span class=n>modA_train_RMSE</span><span class=p>,</span> <span class=n>modB_train_RMSE</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                                     <span class=n>modC_train_RMSE</span><span class=p>,</span> <span class=n>modD_train_RMSE</span><span class=p>),</span> 
</span></span><span class=line><span class=cl>                  <span class=n>ratio_of_RMSEs</span> <span class=o>=</span> <span class=n>RMSE_testdata</span> <span class=o>/</span> <span class=n>RMSE_traindata</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><img src=https://tva1.sinaimg.cn/large/008eGmZEly1gony20lai5j30r608e410.jpg alt="Screen Shot 2021-03-18 at 00.26.32" style=zoom:50%></li><li><p>Analyze of the result and make a conclusion</p><ul><li><em>Prediction accuracy</em>
Model D has a much lower RMSE for the test data than the other models. Models B and C are similar to each other in terms of RMSE, and model A has a much higher RMSE.</li><li><em>Evidence of overfitting</em>
The RMSE for model D is about 15% higher for the test data than the training data, while for the other models, this ranges from 17% to 21%. Model D shows the least evidence of overfitting among these models.</li><li><em>Simplicity of the model</em>
Models A and B each have one predictor, while model C has two predictors and model D has two predictors and one interaction term (total of 4 regression coefficients).</li><li><em>Conclusion</em>
Although model D is the most complex of these models, with four regression coefficients, it exhibits the best prediction accuracy (i.e. lowest RMSE for test data) and shows the least evidence of overfitting. Thus, it is reasonable to choose model D to predict the sale price of Mario Kart games sold on eBay around October 2019.</li></ul></li></ul></blockquote></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script async src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://mel10c.github.io/mel.zhu/js/graph.2d9e48dbe7ea47c0ef1c58296ce14448.js></script></div></div><div id=contact_buttons><footer><p>Made by Melaney Zhu using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, Â© 2023</p><ul><li><a href=https://mel10c.github.io/mel.zhu/>Home</a></li><li><a href=https://www.instagram.com/melaney_dxl/>Instagram</a></li><li><a href=https://github.com/mel10c>GitHub</a></li><li><a href=https://linkedin.com/in/melzyy>LinkedIn</a></li><li><a href=https://github.com/mel10c/mel.zhu/blob/hugo/content/documents/Resume.pdf>Resume</a></li></ul></footer></div></div></body></html>